<!DOCTYPE html>
<html lang="en">
<head>
<title>Vineyard - Restaurant Service Management</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
body{font-family:Arial,Helvetica,sans-serif;background:#f8f7f4}
.tab-active{border-bottom:2px solid #7f1d1d;color:#7f1d1d}
</style>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vineyard Demo</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
<div id="login" class="p-4">
  <h1 class="text-3xl mb-4">Vineyard</h1>
  <label>Username <input id="user" class="border"/></label>
  <label>Password <input id="pass" type="password" class="border"/></label>
  <label for="role">Role</label>
  <select id="role" class="border mt-2">
    <option value="server">Server</option>
    <option value="expo">Expeditor</option>
    <option value="head-sommelier">Head Sommelier</option>
    <option value="manager">Manager</option>
  </select>
  <button id="simple-login-btn" class="bg-red-800 text-white px-4 py-2 mt-2">Login</button>
</div>

<div id="app" class="hidden">
  <div class="border-b mb-4">
    <button class="tab-btn tab-active px-2" data-tab="service">Service</button>
    <button class="tab-btn px-2" data-tab="inventory">Inventory</button>
    <button class="tab-btn px-2" data-tab="reports">Reports</button>
  </div>
  <div id="service-tab" class="tab-content">Service content</div>
  <div id="inventory-tab" class="tab-content hidden">Inventory content</div>
  <div id="reports-tab" class="tab-content hidden">Reports content</div>
</div>
<body class="bg-gray-50">
    <!-- Login Screen -->
    <div id="login-screen" class="min-h-screen flex flex-col items-center justify-center p-4">
        <div class="bg-white shadow rounded p-6 w-full max-w-sm">
            <h1 class="text-2xl font-bold mb-4 text-center">Vineyard</h1>
            <div class="mb-3">
                <label class="block text-sm font-medium">Username</label>
                <input id="login-user" class="mt-1 border rounded w-full p-2" placeholder="Enter your username" title="Username" />
            </div>
            <div class="mb-3">
                <label class="block text-sm font-medium">Password</label>
                <input id="login-pass" type="password" class="mt-1 border rounded w-full p-2" placeholder="Enter your password" title="Password" />
            </div>
            <div class="mb-4">
                <label class="block text-sm font-medium">Role</label>
                <label for="login-role" class="block text-sm font-medium">Role</label>
                <select id="login-role" class="mt-1 border rounded w-full p-2">
                    <option value="server">Server</option>
                    <option value="expo">Expeditor</option>
                    <option value="head-sommelier">Head Sommelier</option>
                    <option value="manager">Manager</option>
                </select>
            </div>
            <button id="login-btn" class="w-full bg-red-800 text-white rounded py-2">Login</button>
        </div>
    </div>

    <!-- Main App -->
    <div id="app" class="hidden min-h-screen flex flex-col">
        <header class="bg-white shadow">
            <div class="container mx-auto px-4 py-3 flex justify-between">
                <div>
                    <h2 class="font-bold" id="current-user"></h2>
                    <span id="current-role" class="text-sm text-gray-600"></span>
                </div>
                <button id="logout-btn" class="text-red-700">Logout</button>
            </div>
            <nav class="border-t">
                <div class="container mx-auto px-4 flex space-x-6">
                    <button class="tab-btn tab-active py-3" data-tab="service">Service</button>
                    <button class="tab-btn py-3" data-tab="inventory">Inventory</button>
                    <button class="tab-btn py-3" data-tab="reports">Reports</button>
                </div>
            </nav>
        </header>
        <main class="flex-grow container mx-auto px-4 py-6">
            <!-- Service Tab -->
            <div id="service-tab" class="tab-content">
                <div class="flex justify-between mb-4">
                    <h3 class="text-xl font-semibold">Active Tables</h3>
                    <button id="open-add-table" class="bg-red-800 text-white px-3 py-1 rounded text-sm">Add Table</button>
                </div>
                <div id="tables" class="grid md:grid-cols-2 gap-4"></div>
            </div>
            <!-- Inventory Tab -->
            <div id="inventory-tab" class="tab-content hidden">
                <h3 class="text-xl font-semibold mb-4">Wine Inventory</h3>
                <div id="inventory" class="space-y-2"></div>
            </div>
            <!-- Reports Tab -->
            <div id="reports-tab" class="tab-content hidden">
                <h3 class="text-xl font-semibold">Reports</h3>
                <p class="text-gray-600">Reporting functionality coming soon.</p>
            </div>
        </main>
    </div>

    <!-- Add Table Modal -->
    <div id="table-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center">
        <div class="bg-white rounded shadow p-6 w-full max-w-md">
            <h4 class="text-lg font-semibold mb-4">Add Table</h4>
            <div class="mb-3">
                <label class="block text-sm">Table Number</label>
                <input id="table-number" type="number" class="border rounded w-full p-2" placeholder="Enter table number" title="Table Number" />
            </div>
            <div class="mb-3">
                <label class="block text-sm">Server</label>
                <input id="table-server" class="border rounded w-full p-2" placeholder="Enter server name" title="Server Name" />
            </div>
            <div class="mb-3">
                <label class="block text-sm">Guests</label>
                <input id="table-guests" type="number" class="border rounded w-full p-2" title="Number of Guests" placeholder="Enter number of guests" />
            </div>
            <div class="flex justify-end space-x-2 mt-4">
                <button id="cancel-table" class="px-3 py-1">Cancel</button>
                <button id="save-table" class="bg-red-800 text-white px-3 py-1 rounded">Save</button>
            </div>
        </div>
    </div>

    <!-- Update Stock Modal -->
    <div id="stock-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center">
        <div class="bg-white rounded shadow p-6 w-full max-w-md">
            <h4 class="text-lg font-semibold mb-4">Update Stock</h4>
            <input type="hidden" id="stock-id" />
            <p id="stock-name" class="mb-2 font-medium"></p>
            <div class="mb-3">
                <label class="block text-sm">Amount</label>
                <input id="stock-amount" type="number" class="border rounded w-full p-2" title="Stock Amount" placeholder="Enter stock amount" />
            </div>
            <div class="flex justify-end space-x-2 mt-4">
                <button id="cancel-stock" class="px-3 py-1">Cancel</button>
                <button id="save-stock" class="bg-red-800 text-white px-3 py-1 rounded">Save</button>
            </div>
        </div>
    </div>

<script>
const login=document.getElementById('login');
const app=document.getElementById('app');
const tabButtons=document.querySelectorAll('.tab-btn');
const tabContents=document.querySelectorAll('.tab-content');

// simple login
document.getElementById('simple-login-btn').addEventListener('click',()=>{
  login.classList.add('hidden');
  app.classList.remove('hidden');
}); // <-- Add this closing brace and parenthesis

// demo users
const users = [
    { username: 'demo', password: 'demo', name: 'Demo User' }
];

// data
let currentUser = null;
let tables = [];
let wines = [
    { id: 1, name: 'Chardonnay', type: 'White', vintage: 2019, stock: 12 },
    { id: 2, name: 'Cabernet Sauvignon', type: 'Red', vintage: 2018, stock: 15 }
];

// helpers
function byId(id){ return document.getElementById(id); }

// login
byId('login-btn').addEventListener('click', () => {
    const u = byId('login-user').value;
    const p = byId('login-pass').value;
    const user = users.find(x => x.username === u && x.password === p);
    if(!user){ alert('Invalid credentials'); return; }
    currentUser = user;
    byId('current-user').textContent = user.name;
    byId('current-role').textContent = byId('login-role').value;
    byId('login-screen').classList.add('hidden');
    byId('app').classList.remove('hidden');
    renderTables();
    renderInventory();
});

byId('logout-btn').addEventListener('click', () => {
    location.reload();
});

// tab navigation
tabButtons.forEach(btn=>btn.addEventListener('click',()=>{
  const tab=btn.dataset.tab;
  tabButtons.forEach(b=>b.classList.remove('tab-active'));
  btn.classList.add('tab-active');
  tabContents.forEach(c=>c.classList.add('hidden'));
  document.getElementById(tab+'-tab').classList.remove('hidden');
}));

// tables
byId('open-add-table').addEventListener('click', () => {
    byId('table-number').value = '';
    byId('table-server').value = '';
    byId('table-guests').value = '';
    byId('table-modal').classList.remove('hidden');
});
byId('cancel-table').addEventListener('click', () => {
    byId('table-modal').classList.add('hidden');
});
byId('save-table').addEventListener('click', () => {
    const number = byId('table-number').value;
    const server = byId('table-server').value;
    const guests = byId('table-guests').value;
    if(!number || !server || !guests){ alert('Fill all fields'); return; }
    tables.push({ id: Date.now(), number, server, guests, status: 'Seated' });
    byId('table-modal').classList.add('hidden');
    renderTables();
});

function renderTables(){
    const container = byId('tables');
    container.innerHTML = '';
    tables.forEach(t => {
        const card = document.createElement('div');
        card.className = 'bg-white rounded shadow p-4 flex justify-between items-center';
        card.innerHTML = `<div><p class="font-medium">Table ${t.number}</p><p class="text-sm text-gray-600">Server: ${t.server}</p></div><div class="flex items-center space-x-2"><span class="text-sm">${t.guests} guests</span><button data-id="${t.id}" class="complete-table text-red-800 text-sm">Done</button></div>`;
        container.appendChild(card);
    });
    container.querySelectorAll('.complete-table').forEach(btn => {
        btn.addEventListener('click', () => {
            tables = tables.filter(t => t.id != btn.dataset.id);
            renderTables();
        });
    });
}

// inventory
function renderInventory(){
    const container = byId('inventory');
    container.innerHTML = '';
    wines.forEach(w => {
        const row = document.createElement('div');
        row.className = 'bg-white p-3 rounded shadow flex justify-between items-center';
        row.innerHTML = `<div><p class="font-medium">${w.name} (${w.vintage})</p><p class="text-sm text-gray-600">${w.type}</p></div><div class="flex items-center space-x-2"><span>${w.stock}</span><button class="update-stock text-sm text-red-800" data-id="${w.id}">Update</button></div>`;
        container.appendChild(row);
    });
    container.querySelectorAll('.update-stock').forEach(btn => {
        btn.addEventListener('click', () => openStockModal(btn.dataset.id));
    });
}

function openStockModal(id){
    const wine = wines.find(w => w.id == id);
    if(!wine) return;
    byId('stock-id').value = wine.id;
    byId('stock-name').textContent = `${wine.name} (${wine.vintage})`;
    byId('stock-amount').value = '';
    byId('stock-modal').classList.remove('hidden');
}
byId('cancel-stock').addEventListener('click', () => {
    byId('stock-modal').classList.add('hidden');
});
byId('save-stock').addEventListener('click', () => {
    const id = parseInt(byId('stock-id').value, 10);
    const amount = parseInt(byId('stock-amount').value, 10);
    if(isNaN(amount)) return;
    const wine = wines.find(w => w.id === id);
    wine.stock += amount;
    byId('stock-modal').classList.add('hidden');
    renderInventory();
});
</script>
</body>
</html>
